<!DOCTYPE html>
<html>
<head>
    <title>Test Game Authentication</title>
</head>
<body>
    <h1>Testing Game Authentication</h1>
    <button onclick="setAuth()">Set Authentication</button>
    <button onclick="testAPI()">Test API</button>
    <button onclick="goToGame()">Go to Game</button>
    <div id="output"></div>
    
    <script>
        function setAuth() {
            const token = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2OGM2ZmM1MDhmN2Q5Y2JlYjdlNjBlN2QiLCJpYXQiOjE3NTc4OTk4MzUsImV4cCI6MTc1ODUwNDYzNX0.IvhRHN83fT7tu24h-vpD7r-IJWGWU0HjzBcBSm_5mOs';
            const user = {id: '68c6fc508f7d9cbeb7e60e7d', email: 'test@example.com', name: 'testuser', role: 'player'};
            localStorage.setItem('token', token);
            localStorage.setItem('user', JSON.stringify(user));
            document.getElementById('output').innerHTML = 'Authentication set!';
        }
        
        async function testAPI() {
            const token = localStorage.getItem('token');
            try {
                const response = await fetch('http://localhost:3001/api/game/questions/truth/1', {
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                });
                const data = await response.json();
                document.getElementById('output').innerHTML = '<pre>' + JSON.stringify(data, null, 2) + '</pre>';
            } catch (error) {
                document.getElementById('output').innerHTML = 'Error: ' + error.message;
            }
        }
        
        function goToGame() {
            window.location.href = 'http://localhost:5173/game/truth/1';
        }
    </script>
</body>
</html>